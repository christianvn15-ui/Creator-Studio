<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Creator Studio</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="styles.css" />
  <meta name="theme-color" content="#111317" />
  <link rel="icon" href="icons/icon-192.png" />
</head>
<body>
  <header class="topbar">
    <h1>Creator Studio</h1>
    <button id="installBtn" class="btn ghost">Install</button>
  </header>

  <nav class="tabs">
    <button data-page="ai" class="tab active">AI Planner</button>
    <button data-page="notes" class="tab">Notes</button>
    <button data-page="sandbox" class="tab">3D Sandbox</button>
    <button data-page="code" class="tab">Code Space</button>
    <button data-page="profile" class="tab">Profile</button>
  </nav>

  <main>
    <!-- AI Planner -->
    <section id="page-ai" class="page active">
      <div class="panel">
        <h2>AI Planner</h2>
        <div class="ai-chat">
          <div id="chatLog" class="chat-log"></div>
          <form id="chatForm" class="chat-form">
            <input id="chatInput" type="text" placeholder="Describe your idea..." required />
            <button class="btn primary" type="submit">Ask</button>
          </form>
          <details class="hint">
            <summary>API settings</summary>
            <div class="row gap">
              <input id="openaiKey" type="password" placeholder="OpenAI API key (sk-...)" />
              <input id="openaiModel" type="text" placeholder="Model (e.g., gpt-4o-mini)" />
              <button id="saveAiSettings" class="btn">Save</button>
            </div>
            <p class="muted">If no key is set, the local planner will respond offline.</p>
          </details>
        </div>
      </div>
    </section>

    <!-- Notes (Samsung-style) -->
    <section id="page-notes" class="page">
      <div class="panel">
        <div class="row between">
          <h2>Notes</h2>
          <div class="row gap">
            <input id="notesSearch" type="text" placeholder="Search notes..." />
            <button id="newNoteBtn" class="btn primary">New note</button>
          </div>
        </div>

        <div id="notesGrid" class="notes-grid"></div>
      </div>

      <!-- Note editor sheet -->
      <dialog id="noteSheet" class="sheet">
        <form method="dialog" class="sheet-body">
          <div class="row between">
            <input id="noteTitle" class="note-title" type="text" placeholder="Title" />
            <div class="row gap">
              <button id="pinNote" class="btn">Pin</button>
              <button id="deleteNote" class="btn danger">Delete</button>
              <button id="closeNote" class="btn ghost" type="button">Close</button>
            </div>
          </div>
          <textarea id="noteContent" class="note-content" rows="14" placeholder="Write your ideas..."></textarea>
          <div class="row between muted">
            <span id="noteMeta"></span>
            <button id="saveNote" class="btn primary" type="button">Save</button>
          </div>
        </form>
      </dialog>
    </section>

    <!-- 3D Sandbox -->
    <section id="page-sandbox" class="page">
      <div class="panel">
        <div class="row between">
          <h2>3D Sandbox</h2>
          <div class="row gap">
            <button id="resetScene" class="btn">Reset</button>
            <button id="addCube" class="btn">Add cube</button>
            <button id="addSphere" class="btn">Add sphere</button>
            <button id="saveSceneBtn" class="btn">Save scene</button>
          </div>
        </div>
        <div id="sandboxWrap" class="sandbox">
          <canvas id="sandboxCanvas"></canvas>
        </div>
        <p class="hint">Pinch to zoom, drag to orbit, two-finger drag to pan.</p>
      </div>
    </section>

    <!-- Code Space (Acode-like) -->
    <section id="page-code" class="page">
      <div class="panel">
        <div class="row between">
          <h2>Code Space</h2>
          <div class="row gap">
            <button id="newFileBtn" class="btn">New file</button>
            <button id="saveFileBtn" class="btn primary">Save file</button>
          </div>
        </div>

        <div class="code-layout">
          <aside class="file-tree">
            <div class="row between">
              <strong>Files</strong>
              <button id="deleteFileBtn" class="btn danger">Delete</button>
            </div>
            <ul id="filesList" class="list"></ul>
          </aside>

          <section class="editor-pane">
            <div class="row gap tabs small" id="codeTabs"></div>
            <div class="row gap">
              <select id="codeType" class="select">
                <option value="html">HTML</option>
                <option value="js">JavaScript</option>
                <option value="css">CSS</option>
                <option value="json">JSON</option>
                <option value="txt">Text</option>
              </select>
              <input id="fileName" type="text" placeholder="e.g., app.html" />
            </div>
            <textarea id="codeEditor" class="code-editor" spellcheck="false" placeholder="Write code here..."></textarea>
            <details class="preview">
              <summary>Preview</summary>
              <iframe id="previewFrame" title="Preview"></iframe>
            </details>
          </section>
        </div>
      </div>
    </section>

    <!-- Profile & Library -->
    <section id="page-profile" class="page">
      <div class="panel">
        <div class="row between">
          <h2>Profile</h2>
          <button id="openLibrary" class="btn">Open library</button>
        </div>
        <div class="profile">
          <img id="pfp" src="assets/placeholder.png" alt="Profile" class="pfp" />
          <input id="pfpInput" type="file" accept="image/*" hidden />
          <div>
            <div class="field">
              <span class="label">Display name</span>
              <input id="displayName" type="text" placeholder="Your name" />
            </div>
            <div class="field">
              <span class="label">Bio</span>
              <textarea id="bio" rows="3" placeholder="Short bio..."></textarea>
            </div>
            <button id="saveProfile" class="btn primary">Save profile</button>
          </div>
        </div>

        <h3>Your notes</h3>
        <div id="profileProjects" class="cards"></div>
      </div>

      <!-- Library Modal -->
      <dialog id="libraryModal" class="modal">
        <form method="dialog" class="modal-body">
          <div class="row between">
            <h3>Library</h3>
            <button id="closeLibrary" class="btn ghost" type="button">Close</button>
          </div>
          <div class="tabs small">
            <button data-lib="notes" class="tab small active">Notes</button>
            <button data-lib="files" class="tab small">Files</button>
            <button data-lib="sandbox" class="tab small">3D Scenes</button>
            <button data-lib="profile" class="tab small">Profile</button>
          </div>
          <div id="libraryContent" class="library"></div>
        </form>
      </dialog>
    </section>
  </main>

  <footer class="footer">
    <span>Offline-ready • Installable • Local-first</span>
  </footer>

  <script type="module" src="app.js"></script>
</body>
</html>